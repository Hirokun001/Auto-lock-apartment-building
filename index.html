<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>プレサンスロジェ草津シエル 地図＋スプレッドシート</title>
  <style>
    body, html { margin:0; padding:0; height:100%; }
    #map { width:100%; height:100%; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBaxgKJTUw1-0gl1pks-ATIc6iw1HITZyg&callback=initMap" async defer></script>
  <script>
    const apartments = [
      {
        name: "プレサンスロジェ草津シエル",
        position: { lat: 35.02332033360808, lng: 135.96861511597268 },
        sheetUrl: "https://docs.google.com/spreadsheets/d/1C-uSw46BRsJm24PjUI021dkoiSI-D1fRKuNigim6hxo/edit"
      },
      {
        name: "コスモ草津(夜)",
        position: { lat: 35.0173991, lng: 135.9598398 },
        sheetUrl: "https://docs.google.com/spreadsheets/d/1o4RwGf_t96GtdFDp7jNkVDMSFr22Vhz3-ScqZ9wOoDc/edit?usp=sharing"
      },
            {
        name: "ココスモ草津Ⅱ (夜) ",
        position: { lat: 35.0176379, lng: 135.9587089 },
        sheetUrl: "https://docs.google.com/spreadsheets/d/1M8uhi42_NvaVrYCA59XLDuCrLYcn5t8XlrLv-g8-dEI/edit?usp=sharing"
      },
                  {
        name: "リベルテ草津",
        position: { lat: 35.018516, lng: 135.9591753 },
        sheetUrl: "https://docs.google.com/spreadsheets/d/1bVCC-vuvmNAqsKfs3mvRXWGhKCE7XHeAFeJ_nwWRzWA/edit?usp=sharing"
      },
            {
        name: "草津パークホームズ",
        position: { lat: 35.0122945, lng: 135.9559939 },
        sheetUrl: "https://docs.google.com/spreadsheets/d/1ThqZh2LcPcwXBIP630vr3b_ZCR26-npxVy_-347ORRY/edit?usp=sharing"
      }
    ];

    let map;
    let userMarker = null;
    let shadowMarker = null;

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: apartments[0].position,
        zoom: 16
      });

      // マンションマーカー追加
      apartments.forEach(apt => {
        const marker = new google.maps.Marker({
          position: apt.position,
          map: map,
          title: apt.name
        });

        marker.addListener("click", () => {
          window.open(apt.sheetUrl, "_blank");
        });
      });

      // 現在地を取得して表示
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          position => {
            const userPos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

            // 影マーカー（少し大きめ・薄黒）
            shadowMarker = new google.maps.Marker({
              position: userPos,
              map: map,
              zIndex: 1,
              icon: {
                path: google.maps.SymbolPath.CIRCLE,
                scale: 14, // サイズ大きめ
                fillColor: "black",
                fillOpacity: 0.3,
                strokeWeight: 0
              }
            });

            // 本体マーカー（大きめの青丸）
            userMarker = new google.maps.Marker({
              position: userPos,
              map: map,
              zIndex: 2,
              title: "現在地",
              icon: {
                path: google.maps.SymbolPath.CIRCLE,
                scale: 10, // サイズを大きめに変更
                fillColor: "#4285F4",
                fillOpacity: 1,
                strokeWeight: 2,
                strokeColor: "white"
              }
            });

            map.setCenter(userPos);
          },
          error => {
            console.error("Geolocation error:", error);
            alert("現在地を取得できませんでした。");
          }
        );
      } else {
        alert("このブラウザは現在地取得に対応していません。");
      }
    }
  </script>
</body>
</html>
